/*
    jPopup.v0.1.js copyright Tony Bispo Pinheiro aka Tony Pine
*/
(function(a){var b=[],c={init:function(d){var e=a.extend({linkClass:".showpop",popupClass:".jPopup",popEl:false,event:"mouseover",top:25,left:0,delayTime:2e3,timeObj:"",state:true,inputFocus:true,popup:"",popInputs:"",link:""},d);return this.each(function(){var d=a(this);d.data(e);d.data("popInputs",d.find(d.data("popupClass")).find("input[type=text], input[type=password]"));if(d.data("popEl")){d.data("popup",a(d.data("popEl")));d.data("popup").css({display:"none",opacity:0});d.data("link",d)}else{b.push(this);d.data("popup",d.find(d.data("popupClass")));d.data("link",d.find(d.data("linkClass")));d.css({position:"relative",zIndex:10});d.data("popup").css({position:"absolute",top:d.data("top"),left:d.data("left"),zIndex:999,display:"none",opacity:0})}if(d.data("event")=="mouseover"){d.data("link").bind(d.data("event")+".link",a.proxy(c.showPopup,d));d.data("popup").bind(d.data("event")+".tooltip",a.proxy(c.showPopup,d));d.data("link").bind("mouseout.link",a.proxy(c.mouseOut,d));d.data("popup").bind("mouseout.tooltip",a.proxy(c.mouseOut,d));a.each(d.data("popInputs"),function(){a(this).bind("focus.tooltip",a.proxy(c.focusIn,d));a(this).bind("blur.tooltip",a.proxy(c.focusOut,d))})}else{d.data("link").toggle(a.proxy(c.showPopup,d),a.proxy(function(){this.data("state",true);c.hidePopup.apply(this)},d))}a(document).bind("click.tooltip",a.proxy(c.hidePopup,d))})},initTimeout:function(){var a=this;this.data("timeObj",setTimeout(function(){c.resetState.apply(a)},this.data("delayTime")))},stopTimeout:function(){if(this.data("timeObj")){clearTimeout(this.data("timeObj"))}},resetState:function(){c.hidePopup.apply(this)},focusIn:function(){this.data("inputFocus",false)},focusOut:function(){this.data("inputFocus",true);c.initTimeout.apply(this)},mouseOut:function(){this.data("state",true);c.initTimeout.apply(this)},showPopup:function(){a.each(b,function(){a(this).data("popup").stop().animate({opacity:0},200,a.proxy(function(){this.css("display","none")},a(this).data("popup")))});this.data("popup").css("display","block").stop().animate({opacity:1},200);this.data("state",false);c.stopTimeout.apply(this)},hidePopup:function(){if(this.data("state")&&this.data("inputFocus")){this.data("popup").stop().animate({opacity:0},200,a.proxy(function(){this.css("display","none")},a(this).data("popup")))}else{c.stopTimeout.apply(this)}}};a.fn.jPopup=function(b){if(c[b]){return c[b].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof b==="object"||!b){return c.init.apply(this,arguments)}else{a.error("Method "+b+" does not exist on jQuery.jPopup")}}})(jQuery)